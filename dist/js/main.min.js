/*
 Grunt2019-08-02 
*/

"use strict";require(["esri/Map","esri/WebMap","esri/views/MapView","esri/widgets/LayerList","esri/layers/FeatureLayer","esri/widgets/Home","esri/widgets/BasemapToggle","esri/widgets/Zoom","esri/widgets/Legend","esri/tasks/QueryTask","esri/tasks/support/Query","dgrid/OnDemandGrid","dgrid/extensions/ColumnHider","dojo/store/Memory","dstore/legacy/StoreAdapter","dgrid/Selection","dojo/_base/declare","dojo/number","dojox/grid/EnhancedGrid","dojox/grid/enhanced/plugins/exporter/CSVWriter","esri/renderers/smartMapping/creators/color","esri/widgets/Search","esri/tasks/Locator","esri/geometry/Extent"],function(e,i,t,l,o,s,n,a,r,c,d,b,u,h,v,p,_,g,y,m,f,w,F,P){var k=[],T=[],A={type:"simple",symbol:{type:"simple-fill",color:[0,0,0,0],outline:{color:[128,0,0,.7],width:2}}},H={type:"simple",symbol:{type:"simple-fill",color:[255,211,127,.5],outline:{color:[110,110,110,.5],width:1.5}}},E={type:"simple",symbol:{type:"simple-fill",color:[0,0,0,0],outline:{color:[0,77,168,.7],width:1.5}}},C=new e({basemap:"streets-navigation-vector"}),B=new t({map:C,container:"viewDiv",center:[-95.444,29.756],zoom:8});B.ui.remove("zoom");var M=new o({url:"https://gis.h-gac.com/arcgis/rest/services/Census_ACS/Census_ACS_5Yr_Block_Groups/MapServer/0",outFields:["*"],visible:!1,title:"Block Groups",renderer:E,popupTemplate:{title:"{Block_Group}",content:[{type:"text",text:"<b>Total Population</b>: {Pop_Total}<br /><b>Total Number of Households</b>: {HH_Total}<br /><b>Total Number of Housing Units</b>: {HU_Total}<br /> <br /><b>White Population</b>: {Pop_White}<br /><b>Black Population</b>: {Pop_Black}<br /><b>Hispanic Population</b>: {Pop_Hispanic}<br /><b>Asian Population</b>: {Pop_Asian}<br /><b>Other Population</b>: {Pop_Other}<br /> <br /><b>People under age 5</b>: {Age_Under_5}<br /><b>People between age 5 and 17</b>: {Age_5to17}<br /><b>People between age 18 and 34</b>: {Age_18to34}<br /><b>People between age 35 and 64</b>: {Age_35to64}<br /><b>People Age 65 and Older</b>: {Age_65plus}<br /> <br /><b>Households with no car</b>: {Auto_0_Car}<br /><b>Households with 1 car</b>: {Auto_1_Car}<br /><b>Households with 2 cars</b>: {Auto_2_Car}<br /><b>Households with 3 cars</b>: {Auto_3_Car}<br /><b>Households with 4+ cars</b>: {Auto_4Plus_Car}<br /> <br /><b>People with no high school degree</b>: {Edu_No_High_School}<br /><b>People with high school degree</b>: {Edu_High_School}<br /><b>People with Associate/some degree</b>: {Edu_Associate}<br /><b>People with Bachelor's degree</b>: {Edu_Bachelors}<br /><b>People with graduate degree</b>: {Edu_Graduate}<br /> <br /><b>People who speak No English</b>: {Lang_No_Eng}<br /><b>People who speak English not well</b>: {Lang_Eng_Not_Well}<br /><b>People who speak English well</b>: {Lang_Eng_Well}<br /><b>People who speak English very well</b>: {Lang_Eng_Very_Well}<br /><b>People who speak English Only</b>: {Lang_Eng_Only}<br /> <br /><b>Households above poverty</b>: {Pov_Above}<br /><b>Households below poverty</b>: {Pov_Below}<br /><b>Household Income below 25k</b>: {Inc_Below_25}<br /><b>Household Income between 25k and 50k</b>: {Inc_25To50}<br /><b>Household Income between 50k and 100k</b>: {Inc_50To100}<br /><b>Household Income above 100k</b>: {Inc_Above_100}<br /><b>Median household income</b>: {Inc_HH_Median}<br /> <br /><b>Housing - owner occupied</b>: {H_Owner}<br /><b>Housing - renter occupied</b>:  {H_Renter}<br /> <br /><b>Means of travel to work - carpool</b>: {Mot_Carpool}<br /><b>Means of travel to work - drove alone</b>: {Mot_Drove_Alone}<br /><b>Means of travel to work - other</b>: {Mot_Other}<br /><b>Means of travel to work - ped/bike</b>: {Mot_Pedbike}<br /><b>Means of travel to work - telework</b>: {Mot_Telework}<br /><b>Means of travel to work - transit</b>: {Mot_Transit}<br /> <br /><b>Travel time to work - below 5 mins</b>: {Ttw_Below_5}<br /><b>Travel time to work - 5 to 15 mins</b>: {Ttw_5To15}<br /><b>Travel time to work - 15 to 30 mins</b>: {Ttw_15To30} <br /><b>Travel time to work - 30 to 60 mins</b>: {Ttw_30To60}<br /><b>Travel time to work - 60 mins and above</b>: {Ttw_60Plus}<br /> <br /><b>% of people with income below poverty level (past 12 months)</b>: {Pov_rate}<br /><b>Unemployment Rate</b>: {Unemp_Rate}<br /><b>Median House Value</b>: {Med_hu_val}<br /><b>Mean Travel Time to Work</b>: {Pop_Total}<br /> <br /><b>Total Population in 1980</b>: {tp_1980}<br /><b>Total Population in 1990</b>: {tp_1990}<br /><b>Total Population in 2000</b>: {tp_2000}<br /><b>Total Population in 2010</b>: {tp_2010}"}]}}),N=M.createQuery();N.outFields=["Block_Group"],M.queryFeatures(N).then(function(e){return e.features.map(function(e){return e.attributes.Block_Group})}).then(function(e){e.forEach(function(e,i){(k.length<1||-1===k.indexOf(e))&&""!==e&&k.push(e)}),k.sort(),k.forEach(function(e){var i=document.createElement("option"),t=document.createElement("option");i.text=e,t.text=e,j.add(i),K.add(t)})});var S=new o({url:"https://gis.h-gac.com/arcgis/rest/services/Census_ACS/Census_ACS_5Yr_Tracts/MapServer/0",outFields:["*"],visible:!1,title:"Census Tracts",renderer:A,popupTemplate:{title:"{Tract}",content:[{type:"text",text:"<b>Total Population</b>: {Pop_Total}<br /><b>Total Number of Households</b>: {HH_Total}<br /><b>Total Number of Housing Units</b>: {HU_Total}<br /> <br /><b>White Population</b>: {Pop_White}<br /><b>Black Population</b>: {Pop_Black}<br /><b>Hispanic Population</b>: {Pop_Hispanic}<br /><b>Asian Population</b>: {Pop_Asian}<br /><b>Other Population</b>: {Pop_Other}<br /> <br /><b>People under age 5</b>: {Age_Under_5}<br /><b>People between age 5 and 17</b>: {Age_5to17}<br /><b>People between age 18 and 34</b>: {Age_18to34}<br /><b>People between age 35 and 64</b>: {Age_35to64}<br /><b>People Age 65 and Older</b>: {Age_65plus}<br /> <br /><b>Households with no car</b>: {Auto_0_Car}<br /><b>Households with 1 car</b>: {Auto_1_Car}<br /><b>Households with 2 cars</b>: {Auto_2_Car}<br /><b>Households with 3 cars</b>: {Auto_3_Car}<br /><b>Households with 4+ cars</b>: {Auto_4Plus_Car}<br /> <br /><b>People with no high school degree</b>: {Edu_No_High_School}<br /><b>People with high school degree</b>: {Edu_High_School}<br /><b>People with Associate/some degree</b>: {Edu_Associate}<br /><b>People with Bachelor's degree</b>: {Edu_Bachelors}<br /><b>People with graduate degree</b>: {Edu_Graduate}<br /> <br /><b>People who speak No English</b>: {Lang_No_Eng}<br /><b>People who speak English not well</b>: {Lang_Eng_Not_Well}<br /><b>People who speak English well</b>: {Lang_Eng_Well}<br /><b>People who speak English very well</b>: {Lang_Eng_Very_Well}<br /><b>People who speak English Only</b>: {Lang_Eng_Only}<br /> <br /><b>Households above poverty</b>: {Pov_Above}<br /><b>Households below poverty</b>: {Pov_Below}<br /><b>Household Income below 25k</b>: {Inc_Below_25}<br /><b>Household Income between 25k and 50k</b>: {Inc_25To50}<br /><b>Household Income between 50k and 100k</b>: {Inc_50To100}<br /><b>Household Income above 100k</b>: {Inc_Above_100}<br /><b>Median household income</b>: {Inc_HH_Median}<br /> <br /><b>Housing - owner occupied</b>: {H_Owner}<br /><b>Housing - renter occupied</b>:  {H_Renter}<br /> <br /><b>Means of travel to work - carpool</b>: {Mot_Carpool}<br /><b>Means of travel to work - drove alone</b>: {Mot_Drove_Alone}<br /><b>Means of travel to work - other</b>: {Mot_Other}<br /><b>Means of travel to work - ped/bike</b>: {Mot_Pedbike}<br /><b>Means of travel to work - telework</b>: {Mot_Telework}<br /><b>Means of travel to work - transit</b>: {Mot_Transit}<br /> <br /><b>Travel time to work - below 5 mins</b>: {Ttw_Below_5}<br /><b>Travel time to work - 5 to 15 mins</b>: {Ttw_5To15}<br /><b>Travel time to work - 15 to 30 mins</b>: {Ttw_15To30} <br /><b>Travel time to work - 30 to 60 mins</b>: {Ttw_30To60}<br /><b>Travel time to work - 60 mins and above</b>: {Ttw_60Plus}<br /> <br /><b>% of people with income below poverty level (past 12 months)</b>: {Pov_rate}<br /><b>Unemployment Rate</b>: {Unemp_Rate}<br /><b>Median House Value</b>: {Med_hu_val}<br /><b>Mean Travel Time to Work</b>: {Pop_Total}<br /> <br /><b>Total Population in 1980</b>: {tp_1980}<br /><b>Total Population in 1990</b>: {tp_1990}<br /><b>Total Population in 2000</b>: {tp_2000}<br /><b>Total Population in 2010</b>: {tp_2010}<br /><b><br />Census Tract Page</b>: <a href='{Tract_Website}' target='_blank'>Click for More Information</a>"}]}}),I=S.createQuery();I.outFields=["Tract"],S.queryFeatures(I).then(function(e){return e.features.map(function(e){return e.attributes.Tract})}).then(function(e){e.forEach(function(e,i){(T.length<1||-1===T.indexOf(e))&&""!==e&&T.push(e)}),T.sort(),T.forEach(function(e){var i=document.createElement("option"),t=document.createElement("option");i.text=e,t.text=e,Y.add(i),q.add(t)})});var D=new o({url:"https://gis.h-gac.com/arcgis/rest/services/Census_ACS/Census_ACS_5Yr_Counties/MapServer/0",outFields:["*"],title:"Counties",renderer:H,popupTemplate:{title:"{Name}",content:[{type:"text",text:"<b>Total Population</b>: {Pop_Total}<br /><b>Total Number of Households</b>: {HH_Total}<br /><b>Total Number of Housing Units</b>: {HU_Total}<br /> <br /><b>White Population</b>: {Pop_White}<br /><b>Black Population</b>: {Pop_Black}<br /><b>Hispanic Population</b>: {Pop_Hispanic}<br /><b>Asian Population</b>: {Pop_Asian}<br /><b>Other Population</b>: {Pop_Other}<br /> <br /><b>People under age 5</b>: {Age_Under_5}<br /><b>People between age 5 and 17</b>: {Age_5to17}<br /><b>People between age 18 and 34</b>: {Age_18to34}<br /><b>People between age 35 and 64</b>: {Age_35to64}<br /><b>People Age 65 and Older</b>: {Age_65plus}<br /> <br /><b>Households with no car</b>: {Auto_0_Car}<br /><b>Households with 1 car</b>: {Auto_1_Car}<br /><b>Households with 2 cars</b>: {Auto_2_Car}<br /><b>Households with 3 cars</b>: {Auto_3_Car}<br /><b>Households with 4+ cars</b>: {Auto_4Plus_Car}<br /> <br /><b>People with no high school degree</b>: {Edu_No_High_School}<br /><b>People with high school degree</b>: {Edu_High_School}<br /><b>People with Associate/some degree</b>: {Edu_Associate}<br /><b>People with Bachelor's degree</b>: {Edu_Bachelors}<br /><b>People with graduate degree</b>: {Edu_Graduate}<br /> <br /><b>People who speak No English</b>: {Lang_No_Eng}<br /><b>People who speak English not well</b>: {Lang_Eng_Not_Well}<br /><b>People who speak English well</b>: {Lang_Eng_Well}<br /><b>People who speak English very well</b>: {Lang_Eng_Very_Well}<br /><b>People who speak English Only</b>: {Lang_Eng_Only}<br /> <br /><b>Households above poverty</b>: {Pov_Above}<br /><b>Households below poverty</b>: {Pov_Below}<br /><b>Household Income below 25k</b>: {Inc_Below_25}<br /><b>Household Income between 25k and 50k</b>: {Inc_25To50}<br /><b>Household Income between 50k and 100k</b>: {Inc_50To100}<br /><b>Household Income above 100k</b>: {Inc_Above_100}<br /><b>Median household income</b>: {Inc_HH_Median}<br /> <br /><b>Housing - owner occupied</b>: {H_Owner}<br /><b>Housing - renter occupied</b>:  {H_Renter}<br /> <br /><b>Means of travel to work - carpool</b>: {Mot_Carpool}<br /><b>Means of travel to work - drove alone</b>: {Mot_Drove_Alone}<br /><b>Means of travel to work - other</b>: {Mot_Other}<br /><b>Means of travel to work - ped/bike</b>: {Mot_Pedbike}<br /><b>Means of travel to work - telework</b>: {Mot_Telework}<br /><b>Means of travel to work - transit</b>: {Mot_Transit}<br /> <br /><b>Travel time to work - below 5 mins</b>: {Ttw_Below_5}<br /><b>Travel time to work - 5 to 15 mins</b>: {Ttw_5To15}<br /><b>Travel time to work - 15 to 30 mins</b>: {Ttw_15To30} <br /><b>Travel time to work - 30 to 60 mins</b>: {Ttw_30To60}<br /><b>Travel time to work - 60 mins and above</b>: {Ttw_60Plus}<br /> <br /><b>% of people with income below poverty level (past 12 months)</b>: {Pov_rate}<br /><b>Unemployment Rate</b>: {Unemp_Rate}<br /><b>Median House Value</b>: {Med_hu_val}<br /><b>Mean Travel Time to Work</b>: {Pop_Total}<br /> <br /><b>Total Population in 1980</b>: {tp_1980}<br /><b>Total Population in 1990</b>: {tp_1990}<br /><b>Total Population in 2000</b>: {tp_2000}<br /><b>Total Population in 2010</b>: {tp_2010}<br /><b><br />County Page</b>: <a href='{County_Website}' target='_blank'>Click for More Information</a>"}]}});C.add(D),C.add(S),C.add(M);var O=$(".components li"),W=$(".arrow-left"),L=$(".panelDiv"),V=$("#content");O.on("click",function(e){var i=$(this).attr("panel-target");$("viewDiv").css("visibility","visible"),$("container").css("flex","1");var t=$(this).hasClass("active");if(O.removeClass("active"),W.hide(),L.hide(),t)V.hide();else{V.show();var l=$("[panel-target=".concat(i,"]"));l.addClass("active"),l.find(".arrow-left").show(),$("div[panel-id=".concat(i,"]")).fadeIn(400)}}),$("#content").on("click",".closePanel",function(){$("#viewDiv").css("visibility","visible"),$("#container").css("flex","1"),O.removeClass("active"),W.hide(),L.hide(),V.hide()});var x=new a({view:B});B.ui.add(x,"bottom-right");var R=new s({view:B});B.ui.add(R,"bottom-right");var G=new n({view:B,nextBasemap:"hybrid"});B.ui.add(G,"bottom-right");new l({view:B,container:document.getElementById("layerList")}),new r({view:B,container:document.getElementById("legendList")});var U=new w({view:B,includeDefaultSources:!1,sources:[{locator:new F({url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"}),singleLineFieldName:"SingleLine",outFields:["Addr_type"],searchExtent:new P({xmax:-97.2928,ymax:30.7976,xmin:-93.2361,ymin:28.4605}),placeholder:"3555 Timmons Ln, Houston, TX"}]});B.ui.add(U,"bottom-right");var j=document.getElementById("bgValueType"),K=document.getElementById("bgAttSelect"),Y=document.getElementById("ctValueType"),q=document.getElementById("ctAttSelect");$("#boundaryType").change(function(){var e=$("#boundaryType").val();"BlockGroups"==e?($("#bgValueType").show(),$("#bgValueType").css("visibility","visible"),$("#ctValueType").hide(),$("#ctValueType").css("visibility","hidden"),$("#countValueType").hide(),$("#countValueType").css("visibility","hidden")):"CensusTracts"==e?($("#bgValueType").hide(),$("#bgValueType").css("visibility","hidden"),$("#ctValueType").show(),$("#ctValueType").css("visibility","visible"),$("#countValueType").hide(),$("#countValueType").css("visibility","hidden")):"County"==e&&($("#bgValueType").hide(),$("#bgValueType").css("visibility","hidden"),$("#ctValueType").hide(),$("#ctValueType").css("visibility","hidden"),$("#countValueType").show(),$("#countValueType").css("visibility","visible"))}),$("#boundary").change(function(){var e=$("#boundary").val();"BlockGroups_1"==e?($("#bgAttSelect").show(),$("#bgAttSelect").css("visibility","visible"),$("#ctAttSelect").hide(),$("#ctAttSelect").css("visibility","hidden"),$("#countyAttSelect").hide(),$("#countyAttSelect").css("visibility","hidden")):"CensusTracts_1"==e?($("#bgAttSelect").hide(),$("#bgAttSelect").css("visibility","hidden"),$("#ctAttSelect").show(),$("#ctAttSelect").css("visibility","visible"),$("#countyAttSelect").hide(),$("#countyAttSelect").css("visibility","hidden")):"County_1"==e&&($("#bgAttSelect").hide(),$("#bgAttSelect").css("visibility","hidden"),$("#ctAttSelect").hide(),$("#ctAttSelect").css("visibility","hidden"),$("#countyAttSelect").show(),$("#countyAttSelect").css("visibility","visible"))}),$("#queryResults").click(function(){var e=$("#boundaryType").val();if("County"==e){var i=$("#countValueType").val();B.whenLayerView(D).then(function(e){e.effect={filter:{where:"Name = '"+i+" County'"},excludedEffect:"grayscale(100%) opacity(50%)"}})}else if("CensusTracts"==e){var t=$("#ctValueType").val();B.whenLayerView(S).then(function(e){e.effect={filter:{where:"Tract = '"+t+"'"},excludedEffect:"opacity(0%)"}})}else if("BlockGroups"==e){var l=$("#bgValueType").val();B.whenLayerView(M).then(function(e){e.effect={filter:{where:"Block_Group = '"+l+"'"},excludedEffect:"opacity(0%)"}})}}),$("#clearResults").click(function(){B.whenLayerView(D).then(function(e){e.effect=null}),B.whenLayerView(S).then(function(e){e.effect=null}),B.whenLayerView(M).then(function(e){e.effect=null})});document.getElementById("reportList");var Q,J,z,X,Z,ee,ie,te=["__OBJECTID","tp_1980","tp_1990","tp_2000","tp_2010","Pop_Total","Pop_White","Pop_Black","Pop_Hispanic","Pop_Asian","Pop_Other","Auto_0_Car","Auto_1_Car","Auto_2_Car","Auto_3_Car","Auto_4Plus_Car","Age_Under_5","Age_5to17","Age_18to34","Age_35to64","Age_65plus","Edu_No_High_School","Edu_High_School","Edu_Associate","Edu_Bachelors","Edu_Graduate","Lang_No_Eng","Lang_Eng_Not_Well","Lang_Eng_Well","Lang_Eng_Very_Well","Lang_Eng_Only","Inc_Below_25","Inc_25To50","Inc_50To100","Inc_Above_100","Inc_HH_Median"],le=new v({objectStore:new h({idProperty:"__OBJECTID"})}),oe=new c({url:"https://gis.h-gac.com/arcgis/rest/services/Census_ACS/Census_ACS_5Yr_Counties/MapServer/0"}),se=new c({url:"https://gis.h-gac.com/arcgis/rest/services/Census_ACS/Census_ACS_5Yr_Block_Groups/MapServer/0"}),ne=new c({url:"https://gis.h-gac.com/arcgis/rest/services/Census_ACS/Census_ACS_5Yr_Tracts/MapServer/0"}),ae=new d({returnGeometry:!0});function re(e){var i=e.features;!function(e){e.filter(function(e,i){if(-1!==te.indexOf(e.name))return e}).map(function(e){return"__OBJECTID"===e.name?{field:e.name,label:e.name,sortable:!0,hidden:!0}:{field:e.name,label:e.alias,sortable:!0}});Q=new(_([b,p]))({columns:{Pop_White:{label:"White Population",formatter:g.format},Pop_Black:{label:"Black Population",formatter:g.format},Pop_Hispanic:{label:"Hispanic Population",formatter:g.format},Pop_Asian:{label:"Asian Population",formatter:g.format},Pop_Other:{label:"Other Population",formatter:g.format}}},"grid"),z=new(_([b,p]))({columns:{Age_Under_5:{label:"5 & Under",formatter:g.format},Age_5to17:{label:"5 to 17",formatter:g.format},Age_18to34:{label:"18 to 34",formatter:g.format},Age_35to64:{label:"35 to 64",formatter:g.format},Age_65plus:{label:"65 & Older",formatter:g.format}}},"agegrid"),J=new(_([b,p]))({columns:{Auto_0_Car:{label:"No Cars",formatter:g.format},Auto_1_Car:{label:"1 Car",formatter:g.format},Auto_2_Car:{label:"2 Cars",formatter:g.format},Auto_3_Car:{label:"3 Cars",formatter:g.format},Auto_4Plus_Car:{label:"4+ Cars",formatter:g.format}}},"cargrid"),X=new(_([b,p]))({columns:{Edu_No_High_School:{label:"No High School",formatter:g.format},Edu_High_School:{label:"Only High School",formatter:g.format},Edu_Associate:{label:"Associate's Degree",formatter:g.format},Edu_Bachelors:{label:"Bachelor's Degree",formatter:g.format},Edu_Graduate:{label:"Graduate Degree",formatter:g.format}}},"educationgrid"),Z=new(_([b,p]))({columns:{Lang_No_Eng:{label:"No English",formatter:g.format},Lang_Eng_Not_Well:{label:"English Not Well",formatter:g.format},Lang_Eng_Well:{label:"English Well",formatter:g.format},Lang_Eng_Very_Well:{label:"English Very Well",formatter:g.format},Lang_Eng_Only:{label:"English Only",formatter:g.format}}},"langgrid"),ee=new(_([b,p]))({columns:{Inc_Below_25:{label:"Income Below 25K",formatter:g.format},Inc_25To50:{label:"Income Between 25 & 50K",formatter:g.format},Inc_50To100:{label:"Income Between 50 & 100K",formatter:g.format},Inc_Above_100:{label:"Income Above 100k",formatter:g.format},Inc_HH_Median:{label:"Median Household Income",formatter:g.format}}},"incomegrid"),ie=new(_([b,p]))({columns:{Pop_Total:{label:"Current Total Population",formatter:g.format},tp_2010:{label:"Total Population in 2010",formatter:g.format},tp_2000:{label:"Total Population in 2000",formatter:g.format},tp_1990:{label:"Total Population in 1990",formatter:g.format},tp_1980:{label:"Total Population in 1980",formatter:g.format}}},"populationgrid")}(e.fields);var t=i.map(function(t,e){return Object.keys(t.attributes).filter(function(e){return-1!==te.indexOf(e)}).reduce(function(e,i){return e[i]=t.attributes[i],e},{})});le.objectStore.data=t,Q.set("collection",le),J.set("collection",le),z.set("collection",le),X.set("collection",le),Z.set("collection",le),ee.set("collection",le),ie.set("collection",le)}function ce(e,i){var t=ue(e),l={layer:D,field:e,basemap:C.basemap,classificationMethod:i,numClasses:4,legendOptions:{title:t}};f.createClassBreaksRenderer(l).then(function(e){D.renderer=e.renderer,D.visible||(D.visible=!0,S.visible=!1,M.visible=!1)})}function de(e,i){var t=ue(e),l={layer:M,field:e,basemap:C.basemap,classificationMethod:i,numClasses:4,legendOptions:{title:t}};f.createClassBreaksRenderer(l).then(function(e){M.renderer=e.renderer,M.visible||(D.visible=!1,S.visible=!1,M.visible=!0)})}function be(e,i){var t=ue(e),l={layer:S,field:e,basemap:C.basemap,classificationMethod:i,numClasses:4,legendOptions:{title:t}};f.createClassBreaksRenderer(l).then(function(e){S.renderer=e.renderer,S.visible||(D.visible=!1,S.visible=!0,M.visible=!1)})}function ue(e){return"Pop_White"==e?"Number of People who are White":"Pop_Black"==e?"Number of People who are Black":"Pop_Hispanic"==e?"Number of People who are Hispanic":"Pop_Asian"==e?"Number of People who are Asian":"Pop_Other"==e?"Number of People who are of Other Race":"Age_Under_5"==e?"Number of People who are Under 5":"Age_5to17"==e?"Number of People who are 5 to 17":"Age_18to34"==e?"Number of People who are 18 to 34":"Age_35to64"==e?"Number of People who are 35 to 64":"Age_65plus"==e?"Number of People who are 65 and Older":"Inc_Below_25"==e?"Number of Households that have an Income under 25K":"Inc_25To50"==e?"Number of Households that have an Income between 25K and 50K":"Inc_50To100"==e?"Number of Households that have an Income between 50K and 100K":"Inc_HH_Median"==e?"Household Median Income":"Inc_Above_100"==e?"Number of Households that have an Income above 100K":"Edu_No_High_School"==e?"Number of People who have No High School Education":"Edu_High_School"==e?"Number of People who only have a High School Education":"Edu_Associate"==e?"Number of People who have an Associate's Degree":"Edu_Bachelors"==e?"Number of People who have a Bachelor's Degree":"Edu_Graduate"==e?"Number of People who have a Graduate's Degree":"Mot_Carpool"==e?"Number of People who Carpool to Work":"Mot_Drove_Alone"==e?"Number of People who Drove Alone to Work":"Mot_Other"==e?"Number of People who Took Other Ways to Work":"Mot_Pedbike"==e?"Number of People who Rode a Bicycle to Work":"Mot_Telework"==e?"Number of People who Telework":"Mot_Transit"==e?"Number of People who Took Public Transit to Work":"H_Owner"==e?"Number of People who are a Home Owner":"H_Renter"==e?"Number of People who Rent their Home":"Med_Hu_val"==e?"Median House Cost":"Pov_Above"==e?"Number of Households that are Above the Poverty Rate":"Pov_Below"==e?"Number of Households that are Below the Poverty Rate":"Pov_Rate"==e?"Poverty Rate":"Ttw_Below_5"==e?"Number of People who it takes Less than 5 mins to get to work":"Ttw_5To15"==e?"Number of People who it takes 5 to 15 mins to get to work":"Ttw_15To30"==e?"Number of People who it takes 15 to 30 mins to get to work":"Ttw_30To60"==e?"Number of People who it takes 30 to 60 mins to get to work":"Ttw_60Plus"==e?"Number of People who it takes 60 mins or more to get to work":"M_Travtime"==e?"Average Travel Time to Work":"Lang_No_Eng"==e?"Number of People who Speaks No English":"Lang_Eng_Not_Well"==e?"Number of People who Speaks English Not Well":"Lang_Eng_Well"==e?"Number of People who Speaks English Well":"Lang_Eng_Very_Well"==e?"Number of People who Speaks English Very Well":"Lang_Eng_Only"==e?"Number of People who Only Speaks English":"Auto_0_Car"==e?"Number of Households that don't Own a Car":"Auto_1_Car"==e?"Number of Households that Own 1 Car":"Auto_2_Car"==e?"Number of Households that Own 2 Cars":"Auto_3_Car"==e?"Number of Households that Own 3 Cars":"Auto_4Plus_Car"==e?"Number of Households that Own 4 or More Cars":"Unemp_Rate"==e?"Unemployment Rate":void 0}$("#doBtn").on("click",function(){Q&&J&&z&&X&&(le.objectStore.data={},Q.set("collection",le),J.set("collection",le),z.set("collection",le),X.set("collection",le),Z.set("collection",le),ee.set("collection",le),ie.set("collection",le));var e=$("#boundary").val();if("BlockGroups_1"==e){var i=$("#bgAttSelect").val();ae.where="Block_Group = '"+i+"'",ae.outFields=["*"],se.execute(ae).then(re)}else if("CensusTracts_1"==e){var t=$("#ctAttSelect").val();ae.where="Tract = '"+t+"'",ae.outFields=["*"],ne.execute(ae).then(re)}else if("County_1"==e){var l=$("#countyAttSelect").val();ae.where="Name = '"+l+" County'",console.log(ae.where),ae.outFields=["*"],oe.execute(ae).then(re)}}),$("#export").on("click",function(){!function(e){var i=e.objectStore.data;console.log(i);var t=function(e){var t,l,o,s,i;return null!=(i=e.data||null)&&i.length?(o=e.columnDelimiter||",",s=e.lineDelimiter||"\n",l=Object.keys(i[0]),t="",t+=l.join(o),t+=s,i.forEach(function(i){0,l.forEach(function(e){t+=i[e],t+=o}),t+=s}),t):null}({data:i});t="data:text/csv;charset=utf-8,"+t;var l=encodeURI(t),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download","DemographicReport.csv"),o.click()}(le)}),$("#category").change(function(){var e=$("#category").val();if(1==e){$("#placeHolder").hide(),$("#raceField-select").show(),$("#raceField-select").css("visibility","visible"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");var i=$("#raceField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#raceField-select").change(function(){i=$("#raceField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(2==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").show(),$("#ageField-select").css("visibility","visible"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#ageField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#ageField-select").change(function(){i=$("#ageField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(3==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").show(),$("#householdField-select").css("visibility","visible"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#householdField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#householdField-select").change(function(){i=$("#householdField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(4==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").show(),$("#educationField-select").css("visibility","visible"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#educationField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#educationField-select").change(function(){i=$("#educationField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(5==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").show(),$("#transportationField-select").css("visibility","visible"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#transportationField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#transportationField-select").change(function(){i=$("#transportationField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(6==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").show(),$("#housingField-select").css("visibility","visible"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#housingField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#housingField-select").change(function(){i=$("#housingField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(7==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").show(),$("#povertyField-select").css("visibility","visible"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#povertyField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#povertyField-select").change(function(){i=$("#povertyField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(8==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").show(),$("#travelField-select").css("visibility","visible"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#travelField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#travelField-select").change(function(){i=$("#travelField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(9==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").show(),$("#languageField-select").css("visibility","visible"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#languageField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#languageField-select").change(function(){i=$("#languageField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(10==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").show(),$("#autoField-select").css("visibility","visible"),$("#unemployField-select").hide(),$("#unemployField-select").css("visibility","hidden");i=$("#autoField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#autoField-select").change(function(){i=$("#autoField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}else if(11==e){$("#placeHolder").hide(),$("#raceField-select").hide(),$("#raceField-select").css("visibility","hidden"),$("#ageField-select").hide(),$("#ageField-select").css("visibility","hidden"),$("#householdField-select").hide(),$("#householdField-select").css("visibility","hidden"),$("#educationField-select").hide(),$("#educationField-select").css("visibility","hidden"),$("#transportationField-select").hide(),$("#transportationField-select").css("visibility","hidden"),$("#housingField-select").hide(),$("#housingField-select").css("visibility","hidden"),$("#povertyField-select").hide(),$("#povertyField-select").css("visibility","hidden"),$("#travelField-select").hide(),$("#travelField-select").css("visibility","hidden"),$("#languageField-select").hide(),$("#languageField-select").css("visibility","hidden"),$("#autoField-select").hide(),$("#autoField-select").css("visibility","hidden"),$("#unemployField-select").show(),$("#unemployField-select").css("visibility","visible");i=$("#unemployField-select").val(),t=$("#class-select").val(),l=$("#boundaryDecision").val();$("#unemployField-select").change(function(){i=$("#unemployField-select").val()}),$("#class-select").change(function(){t=$("#class-select").val()}),$("#boundaryDecision").change(function(){l=$("#boundaryDecision").val()}),$("#classBtn").on("click",function(){"county"==l?ce(i,t):"censusBlocks"==l?de(i,t):"censusTracts"==l&&be(i,t)}),$("#clearBtn").on("click",function(){D.renderer=H,M.renderer=E,S.renderer=A})}})});